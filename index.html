<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é˜³å…‰ç«ç‘°è°ƒèŠ‚å‰‚ä½¿ç”¨è®¡ç®—å™¨</title>
    <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .scheme-image {
            width: 100%;
            max-width: 500px;
            height: auto;
            border-radius: 8px;
            margin: 1rem auto;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        }
        .image-caption {
            color: #666;
            font-size: 0.9em;
            text-align: center;
            margin: 0.5rem 0 1.5rem;
        }
        .chemical-grid { 
            display: grid; 
            grid-template-columns: 2fr 1fr 1fr;
            gap: 1rem;
            align-items: center;
            padding: 0.8rem 0;
            border-bottom: 1px solid #eee;
        }
        .total-section { 
            background: #f8fff9;
            border-radius: 8px;
            padding: 1.5rem;
            margin-top: 2rem;
        }
        .stage-card { 
            border-left: 3px solid #4CAF50;
            margin: 1.5rem 0;
            padding-left: 1rem;
        }
        .water-usage { 
            color: #2c7a47;
            font-weight: 500;
            margin-bottom: 1rem;
        }
        .hidden { display: none; }
        #backBtn { margin-top: 1rem; }
        .scheme-desc { color: #666; margin: 1rem 0; }
    </style>
</head>
<body>
    <div class="container py-4">
        <h1 class="text-center mb-4">ğŸ‡ é˜³å…‰ç«ç‘°è°ƒèŠ‚å‰‚ä½¿ç”¨è®¡ç®—å™¨</h1>

        <div class="btn-group w-100 mb-4">
            <button class="btn btn-outline-success active" id="scheme1Btn">æ–¹æ¡ˆä¸€</button>
            <button class="btn btn-outline-success" id="scheme2Btn">æ–¹æ¡ˆäºŒ</button>
        </div>

        <div id="schemeDescription">
            <div class="card mb-4">
                <div class="card-body" id="originalScheme"></div>
            </div>
        </div>

        <div class="calculator-card card mb-4">
            <div class="card-body">
                <div class="input-group">
                    <input type="number" id="mu" class="form-control" placeholder="è¯·è¾“å…¥ç§æ¤äº©æ•°" step="0.1" min="0">
                    <button class="btn btn-success" onclick="calculate()">å¼€å§‹è®¡ç®—</button>
                </div>
            </div>
        </div>

        <div id="calculationResults" class="hidden">
            <button id="backBtn" class="btn btn-outline-secondary" onclick="showOriginal()">è¿”å›æ–¹æ¡ˆè¯´æ˜</button>
        </div>
    </div>

<script>
const schemes = {
    1: {
        name: "æ–¹æ¡ˆä¸€ï¼šèŠ±å‰ä¿æœ+èŠ±åä¿æœ+è†¨æœå¤„ç†",
        desc: "ç‰¹ç‚¹ï¼šçš®è–„ï¼Œè‚‰è„†ï¼Œè‚‰è´¨ç™½ï¼Œé¢œè‰²åé»„äº®ï¼Œæœç²’15-20gï¼Œæœ‰é¦™å‘³ï¼Œä¸æ˜“ç©ºå¿ƒ",
        image: "https://img.picui.cn/free/2025/03/13/67d249a08390d.jpeg",
        steps: [
            {
                name: "èŠ±å‰ä¿æœ",
                waterPerMu: 12,
                formula: [
                    { name: "0.1%æ°¯å¡è„²", amount: 30, unit: "ml", conc: "2ppm", perWater: 30 },
                    { name: "é“¾éœ‰ç´ ", amount: 3, unit: "æ”¯", perWater: 30 }
                ]
            },
            {
                name: "èŠ±åä¿æœ",
                waterPerMu: 12,
                formula: [
                    { name: "å¥‡å®20%èµ¤éœ‰é…¸", amount: 1, unit: "å…‹", conc: "12.5ppm", perWater: 32 },
                    { name: "0.1%æ°¯å¡è„²", amount: 80, unit: "ml", conc: "5ppm", perWater: 32 },
                    { name: "ç›Šæœçµ0.1%å™»è‹¯éš†", amount: 13, unit: "ml", conc: "0.8ppm", perWater: 32 },
                    { name: "é“¾éœ‰ç´ ", amount: 3, unit: "æ”¯", perWater: 32 }
                ]
            },
            {
                name: "è†¨æœå¤„ç†",
                waterPerMu: 40,
                formula: [
                    { name: "0.1%æ°¯å¡è„²", amount: 90, unit: "ml", conc: "6ppm", perWater: 30 },
                    { name: "ä¿ç¾çµ3.6%è‹„æ°¨åŸºå˜Œå‘¤Â·èµ¤éœ‰é…¸", amount: 4, unit: "ml", perWater: 30 },
                    { name: "æµ·å‹‡å£«", amount: 80, unit: "ml", perWater: 30 },
                    { name: "å¥‡å®20%èµ¤éœ‰é…¸", amount: 2, unit: "å…‹", conc: "25ppm", perWater: 30 },
                    { name: "é‡‘æ»¡ç²’0.01%èŠ¸è‹”ç´ å†…è„‚", amount: 15, unit: "ml", perWater: 30 }
                ]
            }
        ]
    },
    2: {
        name: "æ–¹æ¡ˆäºŒï¼šèŠ±åä¿æœ+è†¨æœå¤„ç†",
        desc: "ç‰¹ç‚¹ï¼šæœç²’æ›´å¤§ï¼Œçš®åšåº¦é€‚ä¸­ï¼Œé¢œè‰²é»„ç»¿ï¼Œé¦™å‘³æ·¡",
        image: "https://img.picui.cn/free/2025/03/13/67d24a3b0a176.jpeg",
        steps: [
            {
                name: "èŠ±åä¿æœ",
                waterPerMu: 12,
                formula: [
                    { name: "å¥‡å®20%èµ¤éœ‰é…¸", amount: 1, unit: "å…‹", conc: "12.5ppm", perWater: 32 },
                    { name: "0.1%æ°¯å¡è„²", amount: 40, unit: "ml", conc: "2.5ppm", perWater: 32 },
                    { name: "0.1%å™»è‹¯éš†", amount: 25, unit: "ml", conc: "1.5ppm", perWater: 32 },
                    { name: "æµ·å‹‡å£«", amount: 60, unit: "ml", perWater: 32 },
                    { name: "ä¿ç¾çµ3.6%è‹„æ°¨åŸºå˜Œå‘¤Â·èµ¤éœ‰é…¸", amount: 2, unit: "ml", perWater: 32 },
                    { name: "é€‚ä¹æ—¶20%å’¯èŒè…ˆ", amount: 20, unit: "ml", perWater: 32 },
                    { name: "å¿…åŠ ", amount: 8, unit: "ml", perWater: 32 }
                ]
            },
            {
                name: "è†¨æœå¤„ç†",
                waterPerMu: 40,
                formula: [
                    { name: "å¥‡å®20%èµ¤éœ‰é…¸", amount: 2, unit: "å…‹", conc: "25ppm", perWater: 35 },
                    { name: "0.1%æ°¯å¡è„²", amount: 90, unit: "ml", conc: "5ppm", perWater: 35 },
                    { name: "æµ·å‹‡å£«", amount: 60, unit: "ml", perWater: 35 },
                    { name: "ä¿ç¾çµ3.6%è‹„æ°¨åŸºå˜Œå‘¤Â·èµ¤éœ‰é…¸", amount: 4, unit: "ml", perWater: 35 },
                    { name: "0.1%å™»è‹¯éš†", amount: 10, unit: "ml", conc: "0.5ppm", perWater: 35 },
                    { name: "é‡‘æ»¡ç²’0.01%èŠ¸è‹”ç´ å†…è„‚", amount: 20, unit: "ml", perWater: 35 },
                    { name: "é˜¿æ³•å…‹ç°30%æŠ‘éœ‰å”‘å’¯èŒè…ˆ", amount: 10, unit: "å…‹", perWater: 35 }
                ]
            }
        ]
    }
};

let currentScheme = 1;

// åˆå§‹åŒ–æ˜¾ç¤º
updateSchemeDisplay();

document.querySelectorAll('#scheme1Btn, #scheme2Btn').forEach(btn => {
    btn.addEventListener('click', function() {
        currentScheme = this.id === 'scheme1Btn' ? 1 : 2;
        document.querySelectorAll('.btn').forEach(b => b.classList.remove('active'));
        this.classList.add('active');
        updateSchemeDisplay();
    });
});

function updateSchemeDisplay() {
    const scheme = schemes[currentScheme];
    let html = `
        <div class="image-container">
            <img src="${scheme.image}" 
                 class="scheme-image"
                 alt="${scheme.name}"
                 onerror="this.style.display='none'">
            <div class="image-caption">${scheme.name}æ•ˆæœç¤ºæ„å›¾</div>
        </div>
        <h4 class="text-success mb-3">${scheme.name}</h4>
        <div class="scheme-desc">${scheme.desc}</div>
    `;
    
    scheme.steps.forEach((step, index) => {
        html += `<div class="stage-card">
            <h5>${index + 1}. ${step.name}</h5>
            <div class="chemical-grid-header chemical-grid">
                <div>è¯å‰‚åç§°</div>
                <div>ç”¨é‡/å…‘æ°´é‡</div>
                <div>æµ“åº¦</div>
            </div>`;
        
        step.formula.forEach(chem => {
            html += `<div class="chemical-grid">
                <div class="product-name">${chem.name}</div>
                <div>${chem.amount}${chem.unit} / ${chem.perWater}æ–¤</div>
                <div>${chem.conc || '-'}</div>
            </div>`;
        });
        html += `</div>`;
    });
    
    document.getElementById('originalScheme').innerHTML = html;
}

function calculate() {
    const mu = parseFloat(document.getElementById('mu').value);
    if (!mu || mu <= 0) return alert("è¯·è¾“å…¥æœ‰æ•ˆäº©æ•°");

    document.getElementById('schemeDescription').classList.add('hidden');
    document.getElementById('calculationResults').classList.remove('hidden');

    const scheme = schemes[currentScheme];
    let total = {};
    let resultsHTML = '';

    scheme.steps.forEach(step => {
        const totalWater = (step.waterPerMu * mu).toFixed(1);
        resultsHTML += `<div class="stage-card">
            <h4 class="water-usage">${step.name} - æ€»éœ€æ°´é‡ï¼š${totalWater}æ–¤</h4>
            <div class="chemical-grid-header chemical-grid">
                <div>è¯å‰‚åç§°</div>
                <div>æ€»ç”¨é‡</div>
                <div>æ¯äº©ç”¨é‡</div>
            </div>`;

        step.formula.forEach(chem => {
            const perMu = (chem.amount / chem.perWater * step.waterPerMu).toFixed(2);
            const totalAmount = (perMu * mu).toFixed(2);
            
            resultsHTML += `<div class="chemical-grid">
                <div class="product-name">${chem.name}</div>
                <div><strong>${totalAmount}</strong> ${chem.unit}</div>
                <div>${perMu} ${chem.unit}/äº©</div>
            </div>`;

            const key = `${chem.name}|${chem.unit}`;
            total[key] = (total[key] || 0) + parseFloat(totalAmount);
        });

        resultsHTML += `</div>`;
    });

    let totalHTML = `<div class="total-section">
        <h4 class="text-success mb-3">æ€»è®¡ç”¨é‡</h4>
        <div class="chemical-grid-header chemical-grid">
            <div>è¯å‰‚åç§°</div>
            <div>æ€»ç”¨é‡</div>
            <div>å•ä½</div>
        </div>`;
    
    for (const [key, value] of Object.entries(total)) {
        const [name, unit] = key.split("|");
        totalHTML += `<div class="chemical-grid">
            <div class="product-name">${name}</div>
            <div><strong>${value.toFixed(2)}</strong></div>
            <div>${unit}</div>
        </div>`;
    }
    totalHTML += `</div>`;

    document.getElementById('calculationResults').innerHTML = `<button id="backBtn" class="btn btn-outline-secondary" onclick="showOriginal()">è¿”å›æ–¹æ¡ˆè¯´æ˜</button>` + resultsHTML + totalHTML;
}

function showOriginal() {
    document.getElementById('schemeDescription').classList.remove('hidden');
    document.getElementById('calculationResults').classList.add('hidden');
}
</script>
</body>
</html>
